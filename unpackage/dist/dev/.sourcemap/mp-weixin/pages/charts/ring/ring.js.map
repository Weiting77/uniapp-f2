{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapp/uF2-main/pages/charts/ring/ring.vue?c4f6","webpack:///D:/uniapp/uF2-main/pages/charts/ring/ring.vue?f181","webpack:///D:/uniapp/uF2-main/pages/charts/ring/ring.vue?a373","webpack:///D:/uniapp/uF2-main/pages/charts/ring/ring.vue?afc1","uni-app:///pages/charts/ring/ring.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AAC8L;AAC9L,gBAAgB,qMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2tB,CAAgB,suBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACO/uB,0F;;;;;;AAEA,iBAEA,+CACA,IADA,GACA,UADA,CACA,IADA,CACA,CADA,GACA,UADA,CACA,CADA,KAEA,KAFA,GAEA,CAFA,CAEA,KAFA;AAGA;AACA,UADA,GACA,KADA,CACA,MADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA,oBAHA;AAIA,oBAJA;AAKA,2BALA;AAMA,yBANA,EADA;;;AAUA;AACA;AACA,mBADA;AAEA,mBAFA;AAGA,qEAHA;AAIA,uBAJA;AAKA,yBALA;AAMA,8BANA,EADA;;;AAUA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA,oBAHA;AAIA,oBAJA;AAKA,yBALA,EADA;;;AASA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA,KAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCADA;AAEA,qCAFA;AAGA,qCAHA;AAIA,uCAJA;AAKA,oCALA;AAMA,qCANA;;;AASA;AACA;AACA;AACA,GAFA;AAGA;AACA,cADA;AAEA,gBAFA;AAGA,kBAHA;;AAKA;AACA;AACA;AACA,sBADA;AAEA,eAFA;AAGA,oBAHA;AAIA,mBAJA;AAKA,wBALA;AAMA,WANA,mBAMA,EANA,EAMA;AACA,iBADA,GACA,EADA,CACA,WADA;AAEA;AACA;AACA;AACA;AACA;AACA,sCAPA,CAOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;;AAQA;AACA;AACA;AACA,wBADA,EADA;;AAIA,uBAJA;AAKA,eALA,CAKA;AACA;AACA;AACA;AACA,SATA,EASA,KATA,CASA;AACA;AACA,SAXA;AAYA;;AAEA;AACA;AACA;AACA,wBADA,EADA;;AAIA,uBAJA;AAKA,eALA,CAKA;AACA;AACA;AACA;AACA,SATA,EASA,KATA,CASA;AACA;AACA,SAXA;AAYA,OAbA,MAaA;AACA;AACA;AACA;AACA,wBADA,EADA;;AAIA,uBAJA;AAKA,6BALA;AAMA,eANA,CAMA;AACA;AACA;AACA;AACA,SAVA,EAUA,KAVA,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,SArBA;AAsBA;AACA,KA9EA;;AAgFA;AACA,oBADA;AAEA,oBAFA;AAGA,eAHA;;AAKA;AACA;AACA;AACA,UADA,CACA,QADA;AAEA,OAFA,CAEA,MAFA,EAEA,kEAFA;AAGA,QAHA,CAGA,OAHA;;AAKA;AACA,4BADA;AAEA,2BAFA;AAGA;AACA,kBADA,EAHA;;;AAOA;AACA;AACA,C;AACA;AACA,MADA,kBACA;AACA;AACA,cADA;;;AAIA,GANA;AAOA,SAPA,qBAOA;AACA;AACA,GATA,E","file":"pages/charts/ring/ring.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/charts/ring/ring.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./ring.vue?vue&type=template&id=61bdab6e&\"\nvar renderjs\nimport script from \"./ring.vue?vue&type=script&lang=js&\"\nexport * from \"./ring.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/charts/ring/ring.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ring.vue?vue&type=template&id=61bdab6e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ring.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\aobaniu\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./ring.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t  <ff-canvas id=\"ring-dom\" canvas-id=\"ring\" :opts=\"opts\" ref=\"f2\"></ff-canvas>\n\t</view>\n</template>\n\n<script>\n\timport F2 from '../../../f2-canvas/lib/f2';\n\t\n\tlet chart = null;\n\t\n\tfunction initChart(canvas, width, height) {\n\t  const { Util, G } = F2;\n\t  const { Group } = G;\n\t  function drawLabel(shape, coord, canvas) {\n\t    const { center } = coord;\n\t    const origin = shape.get('origin');\n\t    const points = origin.points;\n\t    const x1 = (points[2].x - points[1].x) * 0.75 + points[1].x;\n\t    const x2 = (points[2].x - points[1].x) * 1.8 + points[1].x;\n\t    const y = (points[0].y + points[1].y) / 2;\n\t    const point1 = coord.convertPoint({ x: x1, y });\n\t    const point2 = coord.convertPoint({ x: x2, y });\n\t\n\t    // const group = new Group();\n\t    const group = canvas.addGroup();\n\t    group.addShape('Line', {\n\t      attrs: {\n\t        x1: point1.x,\n\t        y1: point1.y,\n\t        x2: point2.x,\n\t        y2: point2.y,\n\t        lineDash: [0, 2, 2],\n\t        stroke: '#808080'\n\t      }\n\t    });\n\t    const text = group.addShape('Text', {\n\t      attrs: {\n\t        x: point2.x,\n\t        y: point2.y,\n\t        text: origin._origin.type + '  ' + origin._origin.cost + ' 元',\n\t        fill: '#808080',\n\t        textAlign: 'left',\n\t        textBaseline: 'bottom'\n\t      }\n\t    });\n\t    const textWidth = text.getBBox().width;\n\t    const baseLine = group.addShape('Line', {\n\t      attrs: {\n\t        x1: point2.x,\n\t        y1: point2.y,\n\t        x2: point2.x,\n\t        y2: point2.y,\n\t        stroke: '#808080'\n\t      }\n\t    });\n\t    if (point2.x > center.x) {\n\t      baseLine.attr('x2', point2.x + textWidth);\n\t    } else if (point2.x < center.x) {\n\t      text.attr('textAlign', 'right');\n\t      baseLine.attr('x2', point2.x - textWidth);\n\t    } else {\n\t      text.attr('textAlign', 'center');\n\t      text.attr('textBaseline', 'top');\n\t    }\n\t    //canvas.add(group);\n\t    shape.label = group;\n\t  }\n\t\n\t  const data = [\n\t    { type: '饮食', cost: 669.47, a: '1' },\n\t    { type: '服饰美容', cost: 338, a: '1' },\n\t    { type: '健康', cost: 118.5, a: '1' },\n\t    { type: '生活用品', cost: 78.64, a: '1' },\n\t    { type: '其他', cost: 14.9, a: '1' },\n\t    { type: '交通出行', cost: 8.7, a: '1' }\n\t  ];\n\t\n\t  let sum = 0;\n\t  data.map(obj => {\n\t    sum += obj.cost;\n\t  });\n\t  chart = new F2.Chart({\n\t    el: canvas,\n\t    width,\n\t    height\n\t  });\n\t  chart.source(data);\n\t  let lastClickedShape;\n\t  chart.legend({\n\t    position: 'bottom',\n\t    offsetY: -5,\n\t    marker: 'square',\n\t    align: 'center',\n\t    itemMarginBottom: 20,\n\t    onClick(ev) {\n\t      const { clickedItem } = ev;\n\t      const dataValue = clickedItem.get('dataValue');\n\t      const canvas = chart.get('canvas');\n\t      const coord = chart.get('coord');\n\t      const geom = chart.get('geoms')[0];\n\t      const container = geom.get('container');\n\t      const shapes = geom.get('shapes'); // 只有带精细动画的 geom 才有 shapes 这个属性\n\t\n\t      let clickedShape;\n\t      // 找到被点击的 shape\n\t      Util.each(shapes, shape => {\n\t        const origin = shape.get('origin');\n\t        if (origin && origin._origin.type === dataValue) {\n\t          clickedShape = shape;\n\t          return false;\n\t        }\n\t      });\n\t\n\t      if (lastClickedShape) {\n\t        lastClickedShape.animate().to({\n\t          attrs: {\n\t            lineWidth: 0\n\t          },\n\t          duration: 200\n\t        }).onStart(() => {\n\t          if (lastClickedShape.label) {\n\t            lastClickedShape.label.hide();\n\t          }\n\t        }).onEnd(() => {\n\t          lastClickedShape.set('selected', false);\n\t        });\n\t      }\n\t\n\t      if (clickedShape.get('selected')) {\n\t        clickedShape.animate().to({\n\t          attrs: {\n\t            lineWidth: 0\n\t          },\n\t          duration: 200\n\t        }).onStart(() => {\n\t          if (clickedShape.label) {\n\t            clickedShape.label.hide();\n\t          }\n\t        }).onEnd(() => {\n\t          clickedShape.set('selected', false);\n\t        });\n\t      } else {\n\t        const color = clickedShape.attr('fill');\n\t        clickedShape.animate().to({\n\t          attrs: {\n\t            lineWidth: 5\n\t          },\n\t          duration: 350,\n\t          easing: 'bounceOut'\n\t        }).onStart(() => {\n\t          clickedShape.attr('stroke', color);\n\t          clickedShape.set('zIndex', 1);\n\t          container.sort();\n\t        }).onEnd(() => {\n\t          clickedShape.set('selected', true);\n\t          clickedShape.set('zIndex', 0);\n\t          container.sort();\n\t          lastClickedShape = clickedShape;\n\t          if (clickedShape.label) {\n\t            clickedShape.label.show();\n\t          } else {\n\t            drawLabel(clickedShape, coord, canvas);\n\t          }\n\t          canvas.draw();\n\t        });\n\t      }\n\t    }\n\t  });\n\t  chart.coord('polar', {\n\t    transposed: true,\n\t    innerRadius: 0.7,\n\t    radius: 0.5\n\t  });\n\t  chart.axis(false);\n\t  chart.tooltip(false);\n\t  chart.interval()\n\t    .position('a*cost')\n\t    .color('type', ['#1890FF', '#13C2C2', '#2FC25B', '#FACC14', '#F04864', '#8543E0'])\n\t    .adjust('stack');\n\t\n\t  chart.guide().text({\n\t    position: ['50%', '50%'],\n\t    content: sum.toFixed(2),\n\t    style: {\n\t      fontSize: 24\n\t    }\n\t  });\n\t  chart.render();\n\t  return chart;\n\t}\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\topts: {\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.$refs.f2.init(initChart)\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}